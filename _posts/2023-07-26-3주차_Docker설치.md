---
title : 3ì£¼ì°¨ - Docker ì„¤ì¹˜
date : 2023-07-26 13:00 +09:00
categories : [Data, Data Engineering]
tags : [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤, ì‹¤ë¦¬ì½˜ë°¸ë¦¬ì—ì„œ ë‚ ë¼ì˜¨ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ìŠ¤íƒ€í„° í‚¤íŠ¸ with python, DE,docker]

---

[1. Docker Desktopì„¤ì¹˜](#1-docker-desktopì„¤ì¹˜)
<br>
[2. Docker Desktop ì„¤ì •](#2-docker-desktop-ì„¤ì •)
<br>
[3. Airflow ì„¤ì¹˜](#3-airflow-ì„¤ì¹˜)
<br>
[4. ì ‘ì†](#4-ì ‘ì†)
<br>


# 1. Docker Desktopì„¤ì¹˜

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/992ba4c7-09b0-4f12-8ca8-d947581b2df4)
<https://www.docker.com/products/docker-desktop>

# 2. Docker Desktop ì„¤ì •
![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/982cdaec-618b-4e19-81bb-573dca133726)

- Resources â†’ WSL integration ì—ì„œ ubuntuë¥¼ ì ìš©
- ubuntuë¥¼ ì´ë¯¸ ë‹¤ìš´ë¡œë“œí•œ ìƒí™©ì´ë¼ì„œ dockerì— ì ìš©ë§Œí•¨

# 3. Airflow ì„¤ì¹˜

## 1. git clone

```python
git clone https://github.com/keeyong/data-engineering-batch13.git
```

- ê°•ì‚¬ë‹˜ì´ ì‘ì„±í•œ ì½”ë“œë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— git cloneì‚¬ìš©í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œ

## 2. docker 2.5.1 ì´ë¯¸ì§€ ê´€ë ¨ yaml ì„¤ì¹˜

```python
cd data-engineering-batch13
curl -LfO 'https://airflow.apache.org/docs/apache-airflow/2.5.1/docker-compose.yaml'
```

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/cccc0e3b-6d14-43b9-9ff3-679e4b9e217d)

- docker desktopì— ë“¤ì–´ê°€ë³´ë©´ data-engineering-batch13ì´ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ë¨

## 3. Docker ì‹¤í–‰

### 1. docker ì‹¤í–‰

```python
docker-compose up
```

### 2. AIRFLOW_UID error ë°œìƒ

<https://airflow.apache.org/docs/apache-airflow/stable/howto/docker-compose/index.html> - ì°¸ê³ 


![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/137ae8f8-cd4c-473c-baf9-c77a998a7cee)
![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/835311db-33b0-4d3d-a08b-76a57c9cea4e)


- schedulerê°€ ì—†ë‹¤ê³ ë„ ëœ¬ë‹¤

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/8b6cfc53-9cd0-4335-bcf9-0c864dda6d0d)

- docker ì‹¤í–‰ì€ ë˜ì§€ë§Œ localhostëŠ” ì ‘ì†X

### 3. Airflow ì‚¬ìš©ì ì„¤ì •

- linuxì—ì„œ quick-start í˜¸ìŠ¤íŠ¸ ì‚¬ìš©ì IDë¥¼ ì•Œì•„ì•¼í•˜ê³  ê·¸ë£¹ IDë¥¼ ì„¤ì •í•´ì•¼í•¨
- ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ dags, logs , pluginsìœ¼ë¡œ ìƒì„±ëœ íŒŒì¼ì´ root Userë¡œ ìƒì„±ë¨

```python
mkdir -p ./dags ./logs ./plugins ./config
echo -e "AIRFLOW_UID=$(id -u)" > .env
```

- ë‹¤ë¥¸ ìš´ì˜ ì²´ì œì˜ ê²½ìš° ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ê³ ê°€ í‘œì‹œë  ìˆ˜Â `AIRFLOW_UID`ìˆì§€ë§Œ ë¬´ì‹œí•´ë„ ë©ë‹ˆë‹¤.Â ê²½ê³ ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ ì´ ì½˜í…ì¸ ì™€Â `.env`ë™ì¼í•œ í´ë”ì—Â ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ . `docker-compose.yaml`

```python
AIRFLOW_UID=50000
```

### 4. DB ì´ˆê¸°í™”

```python
docker compose up airflow-init
```

### 5. ì¬ì‹¤í–‰

```python
docker-compose up
```

# 4. ì ‘ì†

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/7c410e74-a92e-468b-9c9e-8a04a77154e8)
![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/d175f25b-f6d8-4eb3-b3bb-ded367ff81e3)

ì ‘ì†ì™„ë£Œ ğŸ˜ƒ


