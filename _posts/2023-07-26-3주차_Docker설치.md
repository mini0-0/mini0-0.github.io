---
title : 3ì£¼ì°¨ - Docker ì„¤ì¹˜
date : 2023-07-26 13:00 +09:00
categories : [Data, Data Engineering]
tags : [í”„ë¡œê·¸ë˜ë¨¸ìŠ¤, ì‹¤ë¦¬ì½˜ë°¸ë¦¬ì—ì„œ ë‚ ë¼ì˜¨ ë°ì´í„° ì—”ì§€ë‹ˆì–´ë§ ìŠ¤íƒ€í„° í‚¤íŠ¸ with python, DE,docker]

---

[1. Docker Desktopì„¤ì¹˜](#1-docker-desktopì„¤ì¹˜)
<br>
[2. Docker Desktop ì„¤ì •](#2-docker-desktop-ì„¤ì •)
<br>
[3. Airflow ì„¤ì¹˜](#3-airflow-ì„¤ì¹˜)
<br>
[4. ì ‘ì†](#4-ì ‘ì†)
<br>


# 1. Docker Desktopì„¤ì¹˜

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/29dfdc68-64f3-4d81-a9d7-44d3afb5cc32)

<https://www.docker.com/products/docker-desktop>

# 2. Docker Desktop ì„¤ì •
![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/9104a393-fe94-4896-92e1-3d7c1bc9df7d)

- Resources â†’ WSL integration ì—ì„œ ubuntuë¥¼ ì ìš©
- ubuntuë¥¼ ì´ë¯¸ ë‹¤ìš´ë¡œë“œí•œ ìƒí™©ì´ë¼ì„œ dockerì— ì ìš©ë§Œí•¨

# 3. Airflow ì„¤ì¹˜

## 1. git clone

```python
git clone https://github.com/keeyong/data-engineering-batch13.git
```

- ê°•ì‚¬ë‹˜ì´ ì‘ì„±í•œ ì½”ë“œë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— git cloneì‚¬ìš©í•˜ì—¬ íŒŒì¼ ë‹¤ìš´ë¡œë“œ

## 2. docker 2.5.1 ì´ë¯¸ì§€ ê´€ë ¨ yaml ì„¤ì¹˜

```python
cd data-engineering-batch13
curl -LfO 'https://airflow.apache.org/docs/apache-airflow/2.5.1/docker-compose.yaml'
```

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/070b529a-beb7-401d-a413-666acb4e3818)

- docker desktopì— ë“¤ì–´ê°€ë³´ë©´ data-engineering-batch13ì´ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ë¨

## 3. Docker ì‹¤í–‰

### 1. docker ì‹¤í–‰

```python
docker-compose up
```

### 2. AIRFLOW_UID error ë°œìƒ

<https://airflow.apache.org/docs/apache-airflow/stable/howto/docker-compose/index.html> - ì°¸ê³ 


![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/4dab253d-7358-4423-aae7-9c00530ad420)
![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/fe8bceae-4c47-464d-9664-b05dbca0bdaa)


- schedulerê°€ ì—†ë‹¤ê³ ë„ ëœ¬ë‹¤

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/120dde37-1aae-435c-9e6c-d5e1ebb47a22)

- docker ì‹¤í–‰ì€ ë˜ì§€ë§Œ localhostëŠ” ì ‘ì†X

### 3. Airflow ì‚¬ìš©ì ì„¤ì •

- linuxì—ì„œ quick-start í˜¸ìŠ¤íŠ¸ ì‚¬ìš©ì IDë¥¼ ì•Œì•„ì•¼í•˜ê³  ê·¸ë£¹ IDë¥¼ ì„¤ì •í•´ì•¼í•¨
- ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ dags, logs , pluginsìœ¼ë¡œ ìƒì„±ëœ íŒŒì¼ì´ root Userë¡œ ìƒì„±ë¨

```python
mkdir -p ./dags ./logs ./plugins ./config
echo -e "AIRFLOW_UID=$(id -u)" > .env
```

- ë‹¤ë¥¸ ìš´ì˜ ì²´ì œì˜ ê²½ìš° ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ê³ ê°€ í‘œì‹œë  ìˆ˜Â `AIRFLOW_UID`ìˆì§€ë§Œ ë¬´ì‹œí•´ë„ ë©ë‹ˆë‹¤.Â ê²½ê³ ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ ì´ ì½˜í…ì¸ ì™€Â `.env`ë™ì¼í•œ í´ë”ì—Â ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ì„ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ . `docker-compose.yaml`

```python
AIRFLOW_UID=50000
```

### 4. DB ì´ˆê¸°í™”

```python
docker compose up airflow-init
```

### 5. ì¬ì‹¤í–‰

```python
docker-compose up
```

# 4. ì ‘ì†

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/dc861f49-5e84-4735-a1a0-70d1b2866e9a)

![image](https://github.com/mini0-0/mini0-0.github.io/assets/63296983/ff8c69ed-0708-455f-bf08-9b26cc3a2a29)

ì ‘ì†ì™„ë£Œ ğŸ˜ƒ


